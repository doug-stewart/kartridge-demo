.c-toggle {
  background-image:
    linear-gradient(
      to right,
      $green-med 0,
      $green-med 50%,
      $red-dark 50%,
      $red-dark 100%
    );
  border: 1px solid $grey-med;
  border-radius: 3px;
  height: 2rem;
  overflow: hidden;
  position: relative;
  width: 4rem;
  z-index: 0;

  &::before {
    background-color: $grey-lighter;
    bottom: 0;
    box-shadow: 0 0 3px rgba($black, .4);
    content: '';
    left: 0;
    pointer-events: none;
    position: absolute;
    top: 0;
    transition:
      background-color .16s $curve,
      transform .16s $curve;
    width: 50%;
    z-index: 1;
  }

  .c-loading__spinner {
    left: calc(25% - .5em);
    opacity: .54;
    position: absolute;
    top: calc(50% - .5em);
    transform: left .16s $curve;
    z-index: 1;
  }

  &.is-enabled {
    &::before { transform: translateX(100%); }
    .c-loading__spinner { left: calc(75% - .5em); }
  }

  &.is-disabled {
    pointer-events: none;

    &::before {
      background-color: $grey-light;
      transform: translateX(50%) scaleX(2);
    }

    .c-toggle-check,
    .c-toggle-close {
      left: 50%;
      z-index: 1;
    }

    .c-toggle-check { opacity: 0; }

    &.is-enabled {
      .c-toggle-check { opacity: 1; }
      .c-toggle-close { opacity: 0; }
    }
  }
}

.c-toggle-check,
.c-toggle-close {
  display: block;
  fill: $white;
  height: .8rem;
  pointer-events: none;
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  transition:
    opacity .16s $curve,
    transform .16s $curve;
  z-index: 0;
}

.c-toggle-check {
  left: 25%;
  width: 1rem;
}

.c-toggle-form {
  align-items: center;
  background-color: $grey-lightest;
  border-radius: 3px;
  display: flex;
  flex-wrap: wrap;
  margin-top: 1.2rem;
  padding: .4rem .4rem .4rem 1.8rem;

  & + & { margin-top: 1rem; }

  &__btns { display: block; }

  &__btn {
    min-width: 8rem;

    &:not(:first-child) { margin-left: .5rem; }
  }

  &__desc { margin-bottom: 1.6rem; }

  &__errors {
    flex: 1 1 100%;
    margin-top: .5rem;

    .c-validation__item { font-weight: 400; }
  }

  &__inner {
    background-color: unset;
    border-top: 1px solid $white;
    margin: .4rem -.4rem 0 -1.8rem;
    padding: 1.8rem;
  }

  &__input {
    border: 0;
    flex: 1;
    height: auto;
    margin: 0 1rem;
    padding: .4rem .5rem .3rem;
  }

  &__label {
    flex: 0 0 auto;
    line-height: 2.58;
  }

  &__value {
    &,
    &--unset {
      flex: 1;
      line-height: 2.58;
      margin: 0 1rem;
    }

    &--unset { color: $grey-dark; }
  }

  .c-form {
    &__group { margin-bottom: 1.8rem; }
    &__label { text-transform: none; }
  }
}

.c-toggle-group {
  border: 1px solid $grey-lighter;
  border-radius: 3px;
  display: grid;
  grid-gap: .7rem 1.5rem;
  grid-template:
    'button title' auto
    '. description' auto
    / auto minmax(0, 1fr);
  padding: 1.5rem;

  &__btn { grid-area: button; }

  &__desc {
    font-size: 1.2rem;
    grid-area: description;

    > p:not(:last-child) { margin-bottom: .8rem; }
  }

  &__note {
    color: $grey-dark;
    font-size: 1rem;
    line-height: 1.6;
  }

  &__title { grid-area: title; }
}

.c-toggle-close {
  left: 75%;
  width: .8rem;
}
